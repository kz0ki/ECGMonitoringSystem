import re
from datetime import datetime
from typing import Optional

from fastapi import FastAPI, Depends, HTTPException, Header, BackgroundTasks
from database import SessionLocal, engine
from sqlalchemy.orm import Session
import models
from utils import (
    get_token,
    get_user_by_token,
    send_message,
    create_message_account_create,
    create_message_account_verify_mail,
    generate_password,
    generate_password_hash,
)
import random
from fastapi.middleware.cors import CORSMiddleware
from schema import *

models.Base.metadata.create_all(bind=engine)


def db():
    try:
        db = SessionLocal()
        yield db
    finally:
        db.close()


app = FastAPI()

origins = [
    "http://localhost",
    "http://localhost:3000",
]
app.add_middleware(
    CORSMiddleware,
    allow_origins=origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)


def insert_users(session, num_users):
    users = [
        models.User(
            email="test@gmail.com",
            password="51f813047b77b5558bbfd4eb6658870a",
            first_name="test",
            last_name="test",
            phone="+380666666661",
            date_of_birth="2003-03-12",
            gender="Male",
            address="test",
            sur_name="test",
            is_admin=True,
        ),
        models.User(
            email="test1@gmail.com",
            password="51f813047b77b5558bbfd4eb6658870a",
            first_name="test",
            last_name="test",
            phone="+380666666662",
            date_of_birth="2003-03-12",
            gender="Male",
            address="test",
            sur_name="test",
            is_admin=False,
        ),
        models.User(
            email="test2@gmail.com",
            password="51f813047b77b5558bbfd4eb6658870a",
            first_name="test",
            last_name="test",
            phone="+380666666663",
            date_of_birth="2003-03-12",
            gender="Male",
            address="test",
            sur_name="test",
            is_admin=False,
        ),
        models.User(
            email="admin@admin.com",
            password="51f813047b77b5558bbfd4eb6658870a",
            first_name="test",
            last_name="test",
            phone="+380666666664",
            date_of_birth="2003-03-12",
            gender="Male",
            address="test",
            sur_name="test",
            is_admin=False,
        ),
    ]
    doctors = [models.Doctor(user_id=1), models.Doctor(user_id=2)]
    patients = [
        models.Patient(
            user_id=3,
            doctor_id=1,
        ),
        models.Patient(
            user_id=4,
            doctor_id=1,
        ),
    ]
    diargam = [
        models.ECGDiagram(
            patient_id=2,
            ecg_date="05/05/2024",
            data_values="""{
  "data": [
    0.0, 0.11605663975810115, 0.23033169569445044, 0.3410946066215178,
    0.44671514568217713, 0.5457093700191451, 0.6367806749110477,
    0.7188545900252064, 0.7911061741164113, 0.8529791229709676,
    0.9041959945192631, 0.9447592645998532, 0.9749432459164116,
    0.9952772200175415, 1.006520436448272, 1.0096299138363232,
    1.0057222246968123, 0.9960306504730837, 0.981859248589796,
    0.9645354736468912, 0.9453630368496694, 0.925576669944333,
    0.9063003830260062, 0.8885106724196689, 0.8730059502117984,
    0.8603832375643382, 0.8510228978936687, 0.84508189286222,
    0.8424957343831195, 0.8429889905377347, 0.846093893702881,
    0.8511763063214335, 0.8574680340693289, 0.8641042471440314,
    0.870164586186968, 0.8747163965196099, 0.8768584576527609,
    0.8757635571547476, 0.8707182995733613, 0.8611586407162319,
    0.8466997916556837, 0.8271593398475876, 0.8025726795042107,
    0.7732001211151955, 0.7395253508667865, 0.7022452239387822,
    0.6622511900878201, 0.6206029543324855, 0.5784952590692015,
    0.5372189264338072, 0.4981175121455613, 0.4625410868103954,
    0.43179877179090986, 0.407111710245372, 0.38956814781511295,
    0.3800822318333586, 0.37935801508470385, 0.38785997434196845,
    0.4057911313066288, 0.4330796020047081, 0.4693741093528886,
    0.5140486827810706, 0.5662164494454501, 0.6247521049658555,
    0.6883223489561181, 0.7554232925815029, 0.8244236018001011,
    0.8936119394365837, 0.9612471188864509, 1.02560928737371,
    1.0850504206397429, 1.1380424350010887, 1.1832213060277958,
    1.2194257227157748, 1.2457289970187597, 1.2614631842148154,
    1.2662346414792132, 1.2599305506092044, 1.242716245545754,
    1.2150235050455624, 1.177530284284532, 1.1311326552602374,
    1.0769099941651572, 1.0160846849739285, 0.9499777942010769,
    0.879962305627879, 0.8074155810986775, 0.7336727315867954,
    0.6599825410690081, 0.587467485887133, 0.5170892378424042,
    0.44962083582529677, 0.3856264656297767, 0.3254495095136348,
    0.2692092259880557, 0.21680610700387387, 0.16793564533254485,
    0.12210994073221595, 0.07868629029193236, 0.03690165625650311,
    -0.004088307363790804, -0.04516715244559828, -0.08721405256140743,
    -0.1310603842337989, -0.17744811496277957, -0.22699157424978128,
    -0.2801440619142568, -0.33717057359197977, -0.3981277026329619,
    -0.46285151854576817, -0.5309539338984547, -0.6018277644609991,
    -0.6746603723135134, -0.7484554698895696, -0.8220623656040541,
    -0.8942116594513807, -0.9635561594892671, -1.0287155959505558,
    -1.0883235658216883, -1.1410750522804087, -1.185772833618882,
    -1.221371126331355, -1.2470148959342588, -1.262073413738391,
    -1.2661668331540166, -1.2591847983246904, -1.2412963725390374,
    -1.2129508742850632, -1.1748695243933664, -1.1280281273255552,
    -1.0736313220153941, -1.013079231727728, -0.9479276077721136,
    -0.8798427892139096, -0.8105529819287814, -0.7417974890402325,
    -0.6752755964125823, -0.6125968289107038, -0.5552342451570846,
    -0.5044823322130594, -0.46142090074405884, -0.42688617148662134,
    -0.4014499926336982, -0.38540784397486505, -0.3787759772991348,
    -0.3812977245139787, -0.39245868638882186, -0.41151020704040553,
    -0.43750025310002977, -0.46931056202620247, -0.5056987102089623,
    -0.5453435858660286, -0.5868926400555912, -0.6290092353081581,
    -0.6704184172379201, -0.709949499741479, -0.7465739766298736,
    -0.7794374473479431, -0.8078844655288339, -0.8314754785858613,
    -0.8499953150757685, -0.8634529838654192, -0.8720728642250577,
    -0.8762776776113159, -0.8766639289758833, -0.8739707773484621,
    -0.8690435325021009, -0.8627931682663149, -0.8561533866039436,
    -0.8500368547965148, -0.8452922678465223, -0.842663858443041,
    -0.8427548886099473, -0.8459965136070959, -0.8526232148991844,
    -0.862655761949138, -0.8758923906818431, -0.891908589392873,
    -0.9100655712385014, -0.9295271973536796, -0.9492848073483796,
    -0.9681891254023114, -0.9849881507252707, -0.9983697200580751,
    -1.0070072550824536, -1.0096070853716996, -1.0049556722679118,
    -0.9919650532150961, -0.9697148799011612, -0.937489535238627,
    -0.8948089798612562, -0.8414521926324572, -0.7774723241390928,
    -0.703202968322903, -0.6192552651939119, -0.5265058661167084,
    -0.42607611121567934, -0.319303074775374, -0.20770341829312977,
    -0.09293124204336596, 0.023268664244041254, 0.1391106101207641,
    0.2528191647974256, 0.3626799734046938, 0.46708852541949086,
    0.5645952431697412, 0.6539453870240035, 0.7341124550749291,
    0.8043239824305701, 0.8640789105989559, 0.9131559915082792,
    0.9516130030558229, 0.9797768726881945, 0.9982251210969052,
    1.0077593385283141, 1.009371680860083, 1.0042056118110774,
    0.9935123130125934, 0.9786043283204936, 0.960808097636438,
    0.9414170655593866, 0.9216470204221626, 0.9025952308218715,
    0.8852048028493384, 0.8702354870500592, 0.8582419266788629,
    0.8495600665471488, 0.8443021444419924, 0.8423603753418337,
    0.8434191235933556, 0.8469750510892304, 0.8523644412504805,
    0.8587966395465831, 0.8653923306159199, 0.8712251976430447,
    0.8753653877223054, 0.8769231418339714, 0.8750909420987759,
    0.8691825823720515, 0.8586676790870185, 0.843200303608886,
    0.8226406293607085, 0.7970687390735758, 0.7667900207120668,
    0.7323318848346941, 0.6944318505196488, 0.6540173603030149,
    0.6121779856564129, 0.5701309626195393, 0.5291812423581248,
    0.49067744486209214, 0.45596525843304603, 0.4263399274718591,
    0.402999512739893, 0.38700059016888066, 0.37921797699434456,
    0.3803099401467308, 0.390690156122711, 0.41050746048917797,
    0.4396341568697759, 0.4776633591790105, 0.5239155274426854,
    0.5774540378368221, 0.637109312879229, 0.7015107391357734,
    0.7691253279083725, 0.8383018387636443, 0.9073188947710534,
    0.9744354786989406, 1.0379421161047018, 1.096211027197098,
    1.1477435653953139, 1.1912133553865754, 1.2255036938356398,
    1.2497379764099892, 1.2633021583630863, 1.2658585339545367,
    1.257350422652537, 1.237997666665988, 1.2082831637073141,
    1.1689309697172465, 1.120876797621453, 1.0652319997647253,
    1.0032423442706437, 0.9362430713784036, 0.8656118386540215,
    0.7927212295808218, 0.7188925061583822, 0.6453522326459346,
    0.573193286456681, 0.503341607470986, 0.4365298246157229,
    0.37327864607246963, 0.31388661596506173, 0.25842853597124993,
    0.206762535875384, 0.15854546385075827, 0.11325596640534565,
    0.07022435017173222, 0.028668072972415616, -0.012268491430697116,
    -0.0534715245542209, -0.0958140796392897, -0.140112894194375,
    -0.18708733162922445, -0.23732200825310748, -0.2912345290771977,
    -0.3490495716475627, -0.41078032810668097, -0.4762180500002391,
    -0.5449301474821071, -0.6162669849671758, -0.6893771999804398,
    -0.7632310622033336, -0.8366510965828499, -0.9083489283197093,
    -0.9769670781056279, -1.0411242513566414, -1.0994625320230231,
    -1.150694814653738, -1.193650790567526, -1.227319845949404,
    -1.2508893300438708, -1.2637768068747341, -1.2656551086556842,
    -1.2564692560765423, -1.2364445912646655, -1.206085773540204,
    -1.1661666053728776, -1.1177109750068115, -1.0619655117801579,
    -1.0003648392907463, -0.9344905700296703, -0.8660254037844421,
    -0.7967038632708286, -0.728261318035289, -0.6623830075200028,
    -0.6006547741833476, -0.5445171577202627, -0.4952243838456204,
    -0.4538096099481898, -0.4210575712443938, -0.3974855125922404,
    -0.38333300200281456, -0.37856091232819067, -0.38285953854733157,
    -0.39566550078418183, -0.41618677887449984, -0.443434943685009,
    -0.4762634033691605, -0.5134102780110802, -0.5535443608522661,
    -0.5953125239443777, -0.6373868841064104, -0.6785100628917589,
    -0.7175369511744978, -0.7534715221323761, -0.7854974210279839,
    -0.8130012896375186, -0.835588049226789, -0.8530876591109338,
    -0.8655531775830431, -0.8732502672990365, -0.8766385968108452,
    -0.8763458828046153, -0.8731355832830187, -0.8678694809603267,
    -0.8614665803531116, -0.8548598748839, -0.8489526170369235,
    -0.8445757424805698, -0.8424480574637057, -0.843140699184797,
    -0.8470472247731009, -0.8543604814993186, -0.8650571660843049,
    -0.8788907032219121, -0.895392772577629, -0.9138835002970391,
    -0.9334900166304185, -0.9531727768747205, -0.9717587593220122,
    -0.9879804014192773, -1.0005189229240283, -1.0080505201016907,
    -1.009293803881459, -1.0030568013940464, -0.9882818464390936,
    -0.9640867500376615, -0.9298007650705759, -0.8849940348070439,
    -0.8294994377300119, -0.7634260026401645, -0.6871633593589165,
    -0.6013770011805627, -0.5069944545768753, -0.4051827682592326,
    -0.2973180363691099, -0.1849479486037729, -0.0697486036621792,
    0.046522977094573016, 0.1620790485226068, 0.275152370992561,
    0.3840467519372905, 0.4871852055411095, 0.5831541197753283,
    0.6707419596055862, 0.7489712261881458, 0.817122627480949,
    0.8747506875915695, 0.9216903207574514, 0.9580542105527, 0.9842211546237346,
    1.0008158486834389, 1.0086808795795463, 1.0088419655569933,
    1.0024677129051323, 0.9908253438938468, 0.9752339847446114,
    0.9570171796841647, 0.9374563152282828, 0.9177465971820054,
    0.8989571229823136, 0.8819964375765239, 0.867584757586947,
    0.8562338033587112, 0.8482349004008827, 0.8436557106526528,
    0.8423456406911483, 0.8439496596284943, 0.8479299552384802,
    0.8535945736565397, 0.8601319359066963, 0.8666499125115471,
    0.8722179730908383, 0.8759108170075268, 0.8768518377265393,
    0.8742547795134012, 0.8674620102049206, 0.8559779557126714,
    0.8394964163278664, 0.817920705568316, 0.7913758113804384,
    0.7602120677468968, 0.725000131876879, 0.6865173772178393,
    0.6457261242836623, 0.6037444286153087, 0.5618104174549682,
    0.5212414041865232, 0.4833892037693083, 0.4495932162973582,
    0.42113293426367365, 0.3991815588770156, 0.38476238072702373,
    0.3787094912063835, 0.3816342464483391, 0.3938987101782532,
    0.4155970626644755, 0.4465456883018881, 0.4862823539477402,
    0.5340745745491615, 0.5889369429934374, 0.6496568887625005,
    0.7148280359172218, 0.782890065566725, 0.8521737606740168,
    0.9209497298473771, 0.9874791780751054, 1.0500650207301327,
    1.1071016251335328, 1.1571215119486835, 1.198837454982925,
    1.2311785788423328, 1.2533192636290424, 1.2646999170732114,
    1.2650389582734927, 1.2543356635502159, 1.2328638429713017,
    1.2011566346578213, 1.1599830117685908, 1.1103168832420478,
    1.053299923851833, 0.990199482951143, 0.9223630869286136,
    0.8511711620752929, 0.7779896583861027, 0.7041242489626334,
    0.630777714438023, 0.5590119996080588, 0.48971625464587676,
    0.42358195218506567, 0.3610859121030411, 0.30248177730580933,
    0.24780017651851824, 0.19685749499637223, 0.1492728624313538,
    0.10449267025882135, 0.06182165865620223, 0.020459376467669117,
    -0.02045937646766858, -0.06182165865619982, -0.10449267025881873,
    -0.14927286243135088, -0.1968574949963672, -0.247800176518518,
    -0.3024817773058051, -0.36108591210303653, -0.4235819521850589,
    -0.48971625464586827, -0.5590119996080577, -0.6307777144380168,
    -0.7041242489626256, -0.7779896583860932, -0.8511711620752834,
    -0.9223630869286124, -0.9901994829511376, -1.0532999238518266,
    -1.1103168832420414, -1.1599830117685843, -1.2011566346578213,
    -1.232863842971299, -1.2543356635502143, -1.2650389582734953,
    -1.2646999170732147, -1.2533192636290444, -1.2311785788423366,
    -1.198837454982932, -1.1571215119486942, -1.1071016251335393,
    -1.050065020730141, -0.9874791780751131, -0.9209497298473872,
    -0.8521737606740314, -0.7828900655667331, -0.7148280359172297,
    -0.6496568887625094, -0.5889369429934448, -0.5340745745491721,
    -0.48628235394774944, -0.44654568830189234, -0.4155970626644796,
    -0.39389871017825584, -0.3816342464483401, -0.3787094912063833,
    -0.38476238072702323, -0.39918155887701373, -0.4211329342636709,
    -0.4495932162973523, -0.4833892037693068, -0.5212414041865188,
    -0.5618104174549633, -0.6037444286153038, -0.6457261242836543,
    -0.6865173772178372, -0.7250001318768744, -0.7602120677468924,
    -0.7913758113804344, -0.8179207055683111, -0.8394964163278648,
    -0.855977955712669, -0.8674620102049188, -0.8742547795134006,
    -0.8768518377265372, -0.8759108170075262, -0.8722179730908378,
    -0.8666499125115467, -0.8601319359066967, -0.8535945736565382,
    -0.8479299552384796, -0.8439496596284932, -0.842345640691148,
    -0.8436557106526492, -0.8482349004008817, -0.8562338033587074,
    -0.8675847575869439, -0.8819964375765216, -0.8989571229823065,
    -0.9177465971820027, -0.9374563152282805, -0.957017179684162,
    -0.975233984744606, -0.9908253438938431, -1.0024677129051278,
    -1.0088419655569916, -1.008680879579546, -1.0008158486834366,
    -0.9842211546237365, -0.9580542105527032, -0.921690320757453,
    -0.8747506875915716, -0.8171226274809523, -0.7489712261881569,
    -0.670741959605599, -0.5831541197753319, -0.4871852055411168,
    -0.38404675193730026, -0.27515237099257916, -0.16207904852262736,
    -0.046522977094582155, 0.06974860366217009, 0.18494794860376224,
    0.29731803636909193, 0.4051827682592194, 0.5069944545768682,
    0.6013770011805548, 0.6871633593589095, 0.7634260026401523,
    0.8294994377300096, 0.8849940348070421, 0.9298007650705736,
    0.9640867500376604, 0.988281846439091, 1.0030568013940504,
    1.009293803881461, 1.0080505201016934, 1.00051892292403, 0.9879804014192809,
    0.9717587593220193, 0.9531727768747249, 0.9334900166304225,
    0.9138835002970419, 0.8953927725776358, 0.8788907032219138,
    0.8650571660843082, 0.8543604814993202, 0.847047224773102,
    0.8431406991848004, 0.8424480574637067, 0.8445757424805708,
    0.8489526170369233, 0.8548598748839015, 0.861466580353112,
    0.8678694809603275, 0.8731355832830183, 0.8763458828046153,
    0.8766385968108473, 0.8732502672990387, 0.8655531775830441,
    0.8530876591109355, 0.8355880492267925, 0.8130012896375242,
    0.7854974210279904, 0.7534715221323779, 0.7175369511745022,
    0.678510062891764, 0.6373868841064187, 0.5953125239443825,
    0.5535443608522709, 0.5134102780110846, 0.47626340336916456,
    0.4434349436850146, 0.4161867788745025, 0.3956655007841824,
    0.3828595385473319, 0.3785609123281903, 0.38333300200281345,
    0.3974855125922364, 0.4210575712443917, 0.45380960994818487,
    0.4952243838456122, 0.544517157720254, 0.600654774183336,
    0.6623830075199939, 0.7282613180352803, 0.7967038632708228,
    0.8660254037844317, 0.9344905700296551, 1.0003648392907378,
    1.0619655117801468, 1.1177109750068066, 1.1661666053728708,
    1.2060857735401942, 1.236444591264661, 1.2564692560765374,
    1.2656551086556835, 1.2637768068747324, 1.2508893300438702,
    1.2273198459494057, 1.193650790567529, 1.1506948146537428,
    1.0994625320230274, 1.0411242513566437, 0.9769670781056319,
    0.9083489283197199, 0.8366510965828545, 0.7632310622033416,
    0.6893771999804428, 0.6162669849671802, 0.5449301474821177,
    0.47621805000024414, 0.41078032810668896, 0.34904957164756434,
    0.29123452907720354, 0.23732200825310773, 0.1870873316292283,
    0.1401128941943801, 0.0958140796392905, 0.053471524554225054,
    0.01226849143069729, -0.028668072972410426, -0.07022435017172758,
    -0.11325596640534297, -0.15854546385075705, -0.20676253587538312,
    -0.2584285359712419, -0.31388661596505385, -0.37327864607246497,
    -0.4365298246157193, -0.5033416074709819, -0.5731932864566686,
    -0.6453522326459218, -0.7188925061583844, -0.7927212295808155,
    -0.865611838654017, -0.9362430713783961, -1.0032423442706326,
    -1.0652319997647273, -1.1208767976214482, -1.1689309697172436,
    -1.2082831637073093, -1.2379976666659867, -1.2573504226525387,
    -1.2658585339545387, -1.263302158363089, -1.2497379764099903,
    -1.2255036938356505, -1.1912133553865791, -1.1477435653953258,
    -1.0962110271971048, -1.037942116104711, -0.9744354786989586,
    -0.9073188947710592, -0.8383018387636597, -0.7691253279083837,
    -0.7015107391357851, -0.637109312879235, -0.5774540378368295,
    -0.5239155274426867, -0.47766335917901737, -0.43963415686978213,
    -0.41050746048918185, -0.3906901561227133, -0.38030994014673114,
    -0.3792179769943449, -0.3870005901688791, -0.402999512739891,
    -0.4263399274718563, -0.4559652584330437, -0.4906774448620852,
    -0.529181242358117, -0.5701309626195344, -0.6121779856564079,
    -0.6540173603030114, -0.694431850519639, -0.7323318848346867,
    -0.766790020712067, -0.7970687390735722, -0.8226406293607048,
    -0.8432003036088844, -0.8586676790870154, -0.8691825823720511,
    -0.8750909420987736, -0.8769231418339699, -0.8753653877223055,
    -0.8712251976430444, -0.8653923306159206, -0.8587966395465819,
    -0.8523644412504798, -0.8469750510892302, -0.8434191235933541,
    -0.8423603753418322, -0.844302144441988, -0.8495600665471467,
    -0.8582419266788613, -0.8702354870500544, -0.8852048028493351,
    -0.9025952308218708, -0.9216470204221568, -0.9414170655593841,
    -0.9608080976364339, -0.9786043283204897, -0.9935123130125928,
    -1.004205611811074, -1.009371680860083, -1.0077593385283132,
    -0.9982251210969044, -0.9797768726881951, -0.9516130030558264,
    -0.9131559915082816, -0.8640789105989608, -0.8043239824305745,
    -0.7341124550749346, -0.6539453870240176, -0.5645952431697518,
    -0.46708852541950363, -0.3626799734047028, -0.25281916479743394,
    -0.13911061012077083, -0.023268664244059458, 0.09293124204335015,
    0.20770341829311917, 0.3193030747753621, 0.42607611121567257,
    0.5265058661166938, 0.6192552651939124, 0.7032029683228944,
    0.7774723241390891, 0.8414521926324537, 0.8948089798612493,
    0.9374895352386267, 0.9697148799011596, 0.9919650532150972,
    1.004955672267913, 1.009607085371703, 1.0070072550824547,
    0.9983697200580822, 0.9849881507252768, 0.9681891254023147,
    0.9492848073483869, 0.9295271973536814, 0.9100655712385025,
    0.8919085893928789, 0.8758923906818459, 0.8626557619491394,
    0.8526232148991879, 0.8459965136070973, 0.8427548886099498,
    0.842663858443042, 0.8452922678465211, 0.8500368547965167,
    0.8561533866039441, 0.8627931682663158, 0.8690435325021006,
    0.873970777348463, 0.8766639289758847, 0.8762776776113166,
    0.8720728642250604, 0.8634529838654211, 0.8499953150757718,
    0.8314754785858649, 0.8078844655288369, 0.7794374473479441,
    0.74657397662988, 0.7099494997414852, 0.670418417237926, 0.629009235308163,
    0.5868926400555936, 0.5453435858660366, 0.5056987102089688,
    0.46931056202620686, 0.43750025310003304, 0.41151020704040775,
    0.3924586863888242, 0.3812977245139796, 0.378775977299134,
    0.38540784397486316, 0.40144999263369496, 0.42688617148661356,
    0.4614209007440505, 0.5044823322130585, 0.555234245157077,
    0.612596828910696, 0.6752755964125761, 0.7417974890402292,
    0.8105529819287803, 0.8798427892138965, 0.9479276077721032,
    1.0130792317277202, 1.0736313220153897, 1.1280281273255537,
    1.174869524393356, 1.212950874285057, 1.2412963725390345,
    1.2591847983246884, 1.266166833154015, 1.262073413738389, 1.24701489593426,
    1.2213711263313585, 1.1857728336188849, 1.1410750522804098,
    1.0883235658216948, 1.0287155959505643, 0.9635561594892763,
    0.8942116594513839, 0.8220623656040575, 0.7484554698895725,
    0.6746603723135238, 0.6018277644610099, 0.5309539338984578,
    0.4628515185457719, 0.3981277026329654, 0.3371705735919885,
    0.2801440619142621, 0.22699157424978295, 0.17744811496278226,
    0.1310603842338025, 0.08721405256141325, 0.04516715244560166,
    0.004088307363792131, -0.03690165625650077, -0.07868629029192832,
    -0.12210994073221292, -0.1679356453325397, -0.21680610700387315,
    -0.26920922598805097, -0.3254495095136287, -0.38562646562977354,
    -0.4496208358252869, -0.5170892378424027, -0.5874674858871259,
    -0.6599825410690032, -0.7336727315867895, -0.8074155810986654,
    -0.8799623056278761, -0.9499777942010675, -1.0160846849739233,
    -1.076909994165152, -1.131132655260229, -1.1775302842845303,
    -1.2150235050455616, -1.2427162455457537, -1.259930550609204,
    -1.2662346414792156, -1.261463184214816, -1.2457289970187615,
    -1.2194257227157816, -1.183221306027802, -1.1380424350010938,
    -1.0850504206397495, -1.0256092873737135, -0.9612471188864646,
    -0.8936119394365942, -0.824423601800111, -0.7554232925815104,
    -0.6883223489561231, -0.6247521049658685, -0.5662164494454589,
    -0.514048682781078, -0.4693741093528939, -0.4330796020047109,
    -0.40579113130663413, -0.38785997434197084, -0.37935801508470535,
    -0.38008223183335854, -0.389568147815112, -0.40711171024536774,
    -0.43179877179090476, -0.4625410868103952, -0.4981175121455563,
    -0.5372189264338029, -0.5784952590691984, -0.6206029543324766,
    -0.6622511900878191, -0.7022452239387761, -0.7395253508667823,
    -0.7732001211151931, -0.8025726795042035, -0.8271593398475867,
    -0.8466997916556799, -0.86115864071623, -0.8707182995733599,
    -0.875763557154745, -0.8768584576527605, -0.8747163965196086,
    -0.8701645861869682, -0.8641042471440308, -0.8574680340693281,
    -0.8511763063214332, -0.8460938937028818, -0.8429889905377321,
    -0.8424957343831179, -0.8450818928622197, -0.8510228978936673,
    -0.8603832375643384, -0.8730059502117926, -0.8885106724196646,
    -0.9063003830260041, -0.9255766699443302, -0.9453630368496662,
    -0.9645354736468839, -0.9818592485897913, -0.9960306504730824,
    -1.0057222246968105, -1.009629913836321, -1.0065204364482692,
    -0.9952772200175418, -0.9749432459164152, -0.9447592645998528,
    -0.9041959945192649, -0.8529791229709709, -0.7911061741164214,
    -0.7188545900252078, -0.6367806749110542, -0.5457093700191524,
    -0.44671514568218473, -0.34109460662153673, -0.23033169569445022,
    -0.11605663975811277, -1.0926077778686108e-14
  ] 
}""",
        ),
        models.ECGDiagram(
            patient_id=2,
            ecg_date="04/05/2024",
            data_values="""{
  "data": [
    0.0, 0.11605663975810115, 0.23033169569445044, 0.3410946066215178,
    0.44671514568217713, 0.5457093700191451, 0.6367806749110477,
    0.7188545900252064, 0.7911061741164113, 0.8529791229709676,
    0.9041959945192631, 0.9447592645998532, 0.9749432459164116,
    0.9952772200175415, 1.006520436448272, 1.0096299138363232,
    1.0057222246968123, 0.9960306504730837, 0.981859248589796,
    0.9645354736468912, 0.9453630368496694, 0.925576669944333,
    0.9063003830260062, 0.8885106724196689, 0.8730059502117984,
    0.8603832375643382, 0.8510228978936687, 0.84508189286222,
    0.8424957343831195, 0.8429889905377347, 0.846093893702881,
    0.8511763063214335, 0.8574680340693289, 0.8641042471440314,
    0.870164586186968, 0.8747163965196099, 0.8768584576527609,
    0.8757635571547476, 0.8707182995733613, 0.8611586407162319,
    0.8466997916556837, 0.8271593398475876, 0.8025726795042107,
    0.7732001211151955, 0.7395253508667865, 0.7022452239387822,
    0.6622511900878201, 0.6206029543324855, 0.5784952590692015,
    0.5372189264338072, 0.4981175121455613, 0.4625410868103954,
    0.43179877179090986, 0.407111710245372, 0.38956814781511295,
    0.3800822318333586, 0.37935801508470385, 0.38785997434196845,
    0.4057911313066288, 0.4330796020047081, 0.4693741093528886,
    0.5140486827810706, 0.5662164494454501, 0.6247521049658555,
    0.6883223489561181, 0.7554232925815029, 0.8244236018001011,
    0.8936119394365837, 0.9612471188864509, 1.02560928737371,
    1.0850504206397429, 1.1380424350010887, 1.1832213060277958,
    1.2194257227157748, 1.2457289970187597, 1.2614631842148154,
    1.2662346414792132, 1.2599305506092044, 1.242716245545754,
    1.2150235050455624, 1.177530284284532, 1.1311326552602374,
    1.0769099941651572, 1.0160846849739285, 0.9499777942010769,
    0.879962305627879, 0.8074155810986775, 0.7336727315867954,
    0.6599825410690081, 0.587467485887133, 0.5170892378424042,
    0.44962083582529677, 0.3856264656297767, 0.3254495095136348,
    0.2692092259880557, 0.21680610700387387, 0.16793564533254485,
    0.12210994073221595, 0.07868629029193236, 0.03690165625650311,
    -0.004088307363790804, -0.04516715244559828, -0.08721405256140743,
    -0.1310603842337989, -0.17744811496277957, -0.22699157424978128,
    -0.2801440619142568, -0.33717057359197977, -0.3981277026329619,
    -0.46285151854576817, -0.5309539338984547, -0.6018277644609991,
    -0.6746603723135134, -0.7484554698895696, -0.8220623656040541,
    -0.8942116594513807, -0.9635561594892671, -1.0287155959505558,
    -1.0883235658216883, -1.1410750522804087, -1.185772833618882,
    -1.221371126331355, -1.2470148959342588, -1.262073413738391,
    -1.2661668331540166, -1.2591847983246904, -1.2412963725390374,
    -1.2129508742850632, -1.1748695243933664, -1.1280281273255552,
    -1.0736313220153941, -1.013079231727728, -0.9479276077721136,
    -0.8798427892139096, -0.8105529819287814, -0.7417974890402325,
    -0.6752755964125823, -0.6125968289107038, -0.5552342451570846,
    -0.5044823322130594, -0.46142090074405884, -0.42688617148662134,
    -0.4014499926336982, -0.38540784397486505, -0.3787759772991348,
    -0.3812977245139787, -0.39245868638882186, -0.41151020704040553,
    -0.43750025310002977, -0.46931056202620247, -0.5056987102089623,
    -0.5453435858660286, -0.5868926400555912, -0.6290092353081581,
    -0.6704184172379201, -0.709949499741479, -0.7465739766298736,
    -0.7794374473479431, -0.8078844655288339, -0.8314754785858613,
    -0.8499953150757685, -0.8634529838654192, -0.8720728642250577,
    -0.8762776776113159, -0.8766639289758833, -0.8739707773484621,
    -0.8690435325021009, -0.8627931682663149, -0.8561533866039436,
    -0.8500368547965148, -0.8452922678465223, -0.842663858443041,
    -0.8427548886099473, -0.8459965136070959, -0.8526232148991844,
    -0.862655761949138, -0.8758923906818431, -0.891908589392873,
    -0.9100655712385014, -0.9295271973536796, -0.9492848073483796,
    -0.9681891254023114, -0.9849881507252707, -0.9983697200580751,
    -1.0070072550824536, -1.0096070853716996, -1.0049556722679118,
    -0.9919650532150961, -0.9697148799011612, -0.937489535238627,
    -0.8948089798612562, -0.8414521926324572, -0.7774723241390928,
    -0.703202968322903, -0.6192552651939119, -0.5265058661167084,
    -0.42607611121567934, -0.319303074775374, -0.20770341829312977,
    -0.09293124204336596, 0.023268664244041254, 0.1391106101207641,
    0.2528191647974256, 0.3626799734046938, 0.46708852541949086,
    0.5645952431697412, 0.6539453870240035, 0.7341124550749291,
    0.8043239824305701, 0.8640789105989559, 0.9131559915082792,
    0.9516130030558229, 0.9797768726881945, 0.9982251210969052,
    1.0077593385283141, 1.009371680860083, 1.0042056118110774,
    0.9935123130125934, 0.9786043283204936, 0.960808097636438,
    0.9414170655593866, 0.9216470204221626, 0.9025952308218715,
    0.8852048028493384, 0.8702354870500592, 0.8582419266788629,
    0.8495600665471488, 0.8443021444419924, 0.8423603753418337,
    0.8434191235933556, 0.8469750510892304, 0.8523644412504805,
    0.8587966395465831, 0.8653923306159199, 0.8712251976430447,
    0.8753653877223054, 0.8769231418339714, 0.8750909420987759,
    0.8691825823720515, 0.8586676790870185, 0.843200303608886,
    0.8226406293607085, 0.7970687390735758, 0.7667900207120668,
    0.7323318848346941, 0.6944318505196488, 0.6540173603030149,
    0.6121779856564129, 0.5701309626195393, 0.5291812423581248,
    0.49067744486209214, 0.45596525843304603, 0.4263399274718591,
    0.402999512739893, 0.38700059016888066, 0.37921797699434456,
    0.3803099401467308, 0.390690156122711, 0.41050746048917797,
    0.4396341568697759, 0.4776633591790105, 0.5239155274426854,
    0.5774540378368221, 0.637109312879229, 0.7015107391357734,
    0.7691253279083725, 0.8383018387636443, 0.9073188947710534,
    0.9744354786989406, 1.0379421161047018, 1.096211027197098,
    1.1477435653953139, 1.1912133553865754, 1.2255036938356398,
    1.2497379764099892, 1.2633021583630863, 1.2658585339545367,
    1.257350422652537, 1.237997666665988, 1.2082831637073141,
    1.1689309697172465, 1.120876797621453, 1.0652319997647253,
    1.0032423442706437, 0.9362430713784036, 0.8656118386540215,
    0.7927212295808218, 0.7188925061583822, 0.6453522326459346,
    0.573193286456681, 0.503341607470986, 0.4365298246157229,
    0.37327864607246963, 0.31388661596506173, 0.25842853597124993,
    0.206762535875384, 0.15854546385075827, 0.11325596640534565,
    0.07022435017173222, 0.028668072972415616, -0.012268491430697116,
    -0.0534715245542209, -0.0958140796392897, -0.140112894194375,
    -0.18708733162922445, -0.23732200825310748, -0.2912345290771977,
    -0.3490495716475627, -0.41078032810668097, -0.4762180500002391,
    -0.5449301474821071, -0.6162669849671758, -0.6893771999804398,
    -0.7632310622033336, -0.8366510965828499, -0.9083489283197093,
    -0.9769670781056279, -1.0411242513566414, -1.0994625320230231,
    -1.150694814653738, -1.193650790567526, -1.227319845949404,
    -1.2508893300438708, -1.2637768068747341, -1.2656551086556842,
    -1.2564692560765423, -1.2364445912646655, -1.206085773540204,
    -1.1661666053728776, -1.1177109750068115, -1.0619655117801579,
    -1.0003648392907463, -0.9344905700296703, -0.8660254037844421,
    -0.7967038632708286, -0.728261318035289, -0.6623830075200028,
    -0.6006547741833476, -0.5445171577202627, -0.4952243838456204,
    -0.4538096099481898, -0.4210575712443938, -0.3974855125922404,
    -0.38333300200281456, -0.37856091232819067, -0.38285953854733157,
    -0.39566550078418183, -0.41618677887449984, -0.443434943685009,
    -0.4762634033691605, -0.5134102780110802, -0.5535443608522661,
    -0.5953125239443777, -0.6373868841064104, -0.6785100628917589,
    -0.7175369511744978, -0.7534715221323761, -0.7854974210279839,
    -0.8130012896375186, -0.835588049226789, -0.8530876591109338,
    -0.8655531775830431, -0.8732502672990365, -0.8766385968108452,
    -0.8763458828046153, -0.8731355832830187, -0.8678694809603267,
    -0.8614665803531116, -0.8548598748839, -0.8489526170369235,
    -0.8445757424805698, -0.8424480574637057, -0.843140699184797,
    -0.8470472247731009, -0.8543604814993186, -0.8650571660843049,
    -0.8788907032219121, -0.895392772577629, -0.9138835002970391,
    -0.9334900166304185, -0.9531727768747205, -0.9717587593220122,
    -0.9879804014192773, -1.0005189229240283, -1.0080505201016907,
    -1.009293803881459, -1.0030568013940464, -0.9882818464390936,
    -0.9640867500376615, -0.9298007650705759, -0.8849940348070439,
    -0.8294994377300119, -0.7634260026401645, -0.6871633593589165,
    -0.6013770011805627, -0.5069944545768753, -0.4051827682592326,
    -0.2973180363691099, -0.1849479486037729, -0.0697486036621792,
    0.046522977094573016, 0.1620790485226068, 0.275152370992561,
    0.3840467519372905, 0.4871852055411095, 0.5831541197753283,
    0.6707419596055862, 0.7489712261881458, 0.817122627480949,
    0.8747506875915695, 0.9216903207574514, 0.9580542105527, 0.9842211546237346,
    1.0008158486834389, 1.0086808795795463, 1.0088419655569933,
    1.0024677129051323, 0.9908253438938468, 0.9752339847446114,
    0.9570171796841647, 0.9374563152282828, 0.9177465971820054,
    0.8989571229823136, 0.8819964375765239, 0.867584757586947,
    0.8562338033587112, 0.8482349004008827, 0.8436557106526528,
    0.8423456406911483, 0.8439496596284943, 0.8479299552384802,
    0.8535945736565397, 0.8601319359066963, 0.8666499125115471,
    0.8722179730908383, 0.8759108170075268, 0.8768518377265393,
    0.8742547795134012, 0.8674620102049206, 0.8559779557126714,
    0.8394964163278664, 0.817920705568316, 0.7913758113804384,
    0.7602120677468968, 0.725000131876879, 0.6865173772178393,
    0.6457261242836623, 0.6037444286153087, 0.5618104174549682,
    0.5212414041865232, 0.4833892037693083, 0.4495932162973582,
    0.42113293426367365, 0.3991815588770156, 0.38476238072702373,
    0.3787094912063835, 0.3816342464483391, 0.3938987101782532,
    0.4155970626644755, 0.4465456883018881, 0.4862823539477402,
    0.5340745745491615, 0.5889369429934374, 0.6496568887625005,
    0.7148280359172218, 0.782890065566725, 0.8521737606740168,
    0.9209497298473771, 0.9874791780751054, 1.0500650207301327,
    1.1071016251335328, 1.1571215119486835, 1.198837454982925,
    1.2311785788423328, 1.2533192636290424, 1.2646999170732114,
    1.2650389582734927, 1.2543356635502159, 1.2328638429713017,
    1.2011566346578213, 1.1599830117685908, 1.1103168832420478,
    1.053299923851833, 0.990199482951143, 0.9223630869286136,
    0.8511711620752929, 0.7779896583861027, 0.7041242489626334,
    0.630777714438023, 0.5590119996080588, 0.48971625464587676,
    0.42358195218506567, 0.3610859121030411, 0.30248177730580933,
    0.24780017651851824, 0.19685749499637223, 0.1492728624313538,
    0.10449267025882135, 0.06182165865620223, 0.020459376467669117,
    -0.02045937646766858, -0.06182165865619982, -0.10449267025881873,
    -0.14927286243135088, -0.1968574949963672, -0.247800176518518,
    -0.3024817773058051, -0.36108591210303653, -0.4235819521850589,
    -0.48971625464586827, -0.5590119996080577, -0.6307777144380168,
    -0.7041242489626256, -0.7779896583860932, -0.8511711620752834,
    -0.9223630869286124, -0.9901994829511376, -1.0532999238518266,
    -1.1103168832420414, -1.1599830117685843, -1.2011566346578213,
    -1.232863842971299, -1.2543356635502143, -1.2650389582734953,
    -1.2646999170732147, -1.2533192636290444, -1.2311785788423366,
    -1.198837454982932, -1.1571215119486942, -1.1071016251335393,
    -1.050065020730141, -0.9874791780751131, -0.9209497298473872,
    -0.8521737606740314, -0.7828900655667331, -0.7148280359172297,
    -0.6496568887625094, -0.5889369429934448, -0.5340745745491721,
    -0.48628235394774944, -0.44654568830189234, -0.4155970626644796,
    -0.39389871017825584, -0.3816342464483401, -0.3787094912063833,
    -0.38476238072702323, -0.39918155887701373, -0.4211329342636709,
    -0.4495932162973523, -0.4833892037693068, -0.5212414041865188,
    -0.5618104174549633, -0.6037444286153038, -0.6457261242836543,
    -0.6865173772178372, -0.7250001318768744, -0.7602120677468924,
    -0.7913758113804344, -0.8179207055683111, -0.8394964163278648,
    -0.855977955712669, -0.8674620102049188, -0.8742547795134006,
    -0.8768518377265372, -0.8759108170075262, -0.8722179730908378,
    -0.8666499125115467, -0.8601319359066967, -0.8535945736565382,
    -0.8479299552384796, -0.8439496596284932, -0.842345640691148,
    -0.8436557106526492, -0.8482349004008817, -0.8562338033587074,
    -0.8675847575869439, -0.8819964375765216, -0.8989571229823065,
    -0.9177465971820027, -0.9374563152282805, -0.957017179684162,
    -0.975233984744606, -0.9908253438938431, -1.0024677129051278,
    -1.0088419655569916, -1.008680879579546, -1.0008158486834366,
    -0.9842211546237365, -0.9580542105527032, -0.921690320757453,
    -0.8747506875915716, -0.8171226274809523, -0.7489712261881569,
    -0.670741959605599, -0.5831541197753319, -0.4871852055411168,
    -0.38404675193730026, -0.27515237099257916, -0.16207904852262736,
    -0.046522977094582155, 0.06974860366217009, 0.18494794860376224,
    0.29731803636909193, 0.4051827682592194, 0.5069944545768682,
    0.6013770011805548, 0.6871633593589095, 0.7634260026401523,
    0.8294994377300096, 0.8849940348070421, 0.9298007650705736,
    0.9640867500376604, 0.988281846439091, 1.0030568013940504,
    1.009293803881461, 1.0080505201016934, 1.00051892292403, 0.9879804014192809,
    0.9717587593220193, 0.9531727768747249, 0.9334900166304225,
    0.9138835002970419, 0.8953927725776358, 0.8788907032219138,
    0.8650571660843082, 0.8543604814993202, 0.847047224773102,
    0.8431406991848004, 0.8424480574637067, 0.8445757424805708,
    0.8489526170369233, 0.8548598748839015, 0.861466580353112,
    0.8678694809603275, 0.8731355832830183, 0.8763458828046153,
    0.8766385968108473, 0.8732502672990387, 0.8655531775830441,
    0.8530876591109355, 0.8355880492267925, 0.8130012896375242,
    0.7854974210279904, 0.7534715221323779, 0.7175369511745022,
    0.678510062891764, 0.6373868841064187, 0.5953125239443825,
    0.5535443608522709, 0.5134102780110846, 0.47626340336916456,
    0.4434349436850146, 0.4161867788745025, 0.3956655007841824,
    0.3828595385473319, 0.3785609123281903, 0.38333300200281345,
    0.3974855125922364, 0.4210575712443917, 0.45380960994818487,
    0.4952243838456122, 0.544517157720254, 0.600654774183336,
    0.6623830075199939, 0.7282613180352803, 0.7967038632708228,
    0.8660254037844317, 0.9344905700296551, 1.0003648392907378,
    1.0619655117801468, 1.1177109750068066, 1.1661666053728708,
    1.2060857735401942, 1.236444591264661, 1.2564692560765374,
    1.2656551086556835, 1.2637768068747324, 1.2508893300438702,
    1.2273198459494057, 1.193650790567529, 1.1506948146537428,
    1.0994625320230274, 1.0411242513566437, 0.9769670781056319,
    0.9083489283197199, 0.8366510965828545, 0.7632310622033416,
    0.6893771999804428, 0.6162669849671802, 0.5449301474821177,
    0.47621805000024414, 0.41078032810668896, 0.34904957164756434,
    0.29123452907720354, 0.23732200825310773, 0.1870873316292283,
    0.1401128941943801, 0.0958140796392905, 0.053471524554225054,
    0.01226849143069729, -0.028668072972410426, -0.07022435017172758,
    -0.11325596640534297, -0.15854546385075705, -0.20676253587538312,
    -0.2584285359712419, -0.31388661596505385, -0.37327864607246497,
    -0.4365298246157193, -0.5033416074709819, -0.5731932864566686,
    -0.6453522326459218, -0.7188925061583844, -0.7927212295808155,
    -0.865611838654017, -0.9362430713783961, -1.0032423442706326,
    -1.0652319997647273, -1.1208767976214482, -1.1689309697172436,
    -1.2082831637073093, -1.2379976666659867, -1.2573504226525387,
    -1.2658585339545387, -1.263302158363089, -1.2497379764099903,
    -1.2255036938356505, -1.1912133553865791, -1.1477435653953258,
    -1.0962110271971048, -1.037942116104711, -0.9744354786989586,
    -0.9073188947710592, -0.8383018387636597, -0.7691253279083837,
    -0.7015107391357851, -0.637109312879235, -0.5774540378368295,
    -0.5239155274426867, -0.47766335917901737, -0.43963415686978213,
    -0.41050746048918185, -0.3906901561227133, -0.38030994014673114,
    -0.3792179769943449, -0.3870005901688791, -0.402999512739891,
    -0.4263399274718563, -0.4559652584330437, -0.4906774448620852,
    -0.529181242358117, -0.5701309626195344, -0.6121779856564079,
    -0.6540173603030114, -0.694431850519639, -0.7323318848346867,
    -0.766790020712067, -0.7970687390735722, -0.8226406293607048,
    -0.8432003036088844, -0.8586676790870154, -0.8691825823720511,
    -0.8750909420987736, -0.8769231418339699, -0.8753653877223055,
    -0.8712251976430444, -0.8653923306159206, -0.8587966395465819,
    -0.8523644412504798, -0.8469750510892302, -0.8434191235933541,
    -0.8423603753418322, -0.844302144441988, -0.8495600665471467,
    -0.8582419266788613, -0.8702354870500544, -0.8852048028493351,
    -0.9025952308218708, -0.9216470204221568, -0.9414170655593841,
    -0.9608080976364339, -0.9786043283204897, -0.9935123130125928,
    -1.004205611811074, -1.009371680860083, -1.0077593385283132,
    -0.9982251210969044, -0.9797768726881951, -0.9516130030558264,
    -0.9131559915082816, -0.8640789105989608, -0.8043239824305745,
    -0.7341124550749346, -0.6539453870240176, -0.5645952431697518,
    -0.46708852541950363, -0.3626799734047028, -0.25281916479743394,
    -0.13911061012077083, -0.023268664244059458, 0.09293124204335015,
    0.20770341829311917, 0.3193030747753621, 0.42607611121567257,
    0.5265058661166938, 0.6192552651939124, 0.7032029683228944,
    0.7774723241390891, 0.8414521926324537, 0.8948089798612493,
    0.9374895352386267, 0.9697148799011596, 0.9919650532150972,
    1.004955672267913, 1.009607085371703, 1.0070072550824547,
    0.9983697200580822, 0.9849881507252768, 0.9681891254023147,
    0.9492848073483869, 0.9295271973536814, 0.9100655712385025,
    0.8919085893928789, 0.8758923906818459, 0.8626557619491394,
    0.8526232148991879, 0.8459965136070973, 0.8427548886099498,
    0.842663858443042, 0.8452922678465211, 0.8500368547965167,
    0.8561533866039441, 0.8627931682663158, 0.8690435325021006,
    0.873970777348463, 0.8766639289758847, 0.8762776776113166,
    0.8720728642250604, 0.8634529838654211, 0.8499953150757718,
    0.8314754785858649, 0.8078844655288369, 0.7794374473479441,
    0.74657397662988, 0.7099494997414852, 0.670418417237926, 0.629009235308163,
    0.5868926400555936, 0.5453435858660366, 0.5056987102089688,
    0.46931056202620686, 0.43750025310003304, 0.41151020704040775,
    0.3924586863888242, 0.3812977245139796, 0.378775977299134,
    0.38540784397486316, 0.40144999263369496, 0.42688617148661356,
    0.4614209007440505, 0.5044823322130585, 0.555234245157077,
    0.612596828910696, 0.6752755964125761, 0.7417974890402292,
    0.8105529819287803, 0.8798427892138965, 0.9479276077721032,
    1.0130792317277202, 1.0736313220153897, 1.1280281273255537,
    1.174869524393356, 1.212950874285057, 1.2412963725390345,
    1.2591847983246884, 1.266166833154015, 1.262073413738389, 1.24701489593426,
    1.2213711263313585, 1.1857728336188849, 1.1410750522804098,
    1.0883235658216948, 1.0287155959505643, 0.9635561594892763,
    0.8942116594513839, 0.8220623656040575, 0.7484554698895725,
    0.6746603723135238, 0.6018277644610099, 0.5309539338984578,
    0.4628515185457719, 0.3981277026329654, 0.3371705735919885,
    0.2801440619142621, 0.22699157424978295, 0.17744811496278226,
    0.1310603842338025, 0.08721405256141325, 0.04516715244560166,
    0.004088307363792131, -0.03690165625650077, -0.07868629029192832,
    -0.12210994073221292, -0.1679356453325397, -0.21680610700387315,
    -0.26920922598805097, -0.3254495095136287, -0.38562646562977354,
    -0.4496208358252869, -0.5170892378424027, -0.5874674858871259,
    -0.6599825410690032, -0.7336727315867895, -0.8074155810986654,
    -0.8799623056278761, -0.9499777942010675, -1.0160846849739233,
    -1.076909994165152, -1.131132655260229, -1.1775302842845303,
    -1.2150235050455616, -1.2427162455457537, -1.259930550609204,
    -1.2662346414792156, -1.261463184214816, -1.2457289970187615,
    -1.2194257227157816, -1.183221306027802, -1.1380424350010938,
    -1.0850504206397495, -1.0256092873737135, -0.9612471188864646,
    -0.8936119394365942, -0.824423601800111, -0.7554232925815104,
    -0.6883223489561231, -0.6247521049658685, -0.5662164494454589,
    -0.514048682781078, -0.4693741093528939, -0.4330796020047109,
    -0.40579113130663413, -0.38785997434197084, -0.37935801508470535,
    -0.38008223183335854, -0.389568147815112, -0.40711171024536774,
    -0.43179877179090476, -0.4625410868103952, -0.4981175121455563,
    -0.5372189264338029, -0.5784952590691984, -0.6206029543324766,
    -0.6622511900878191, -0.7022452239387761, -0.7395253508667823,
    -0.7732001211151931, -0.8025726795042035, -0.8271593398475867,
    -0.8466997916556799, -0.86115864071623, -0.8707182995733599,
    -0.875763557154745, -0.8768584576527605, -0.8747163965196086,
    -0.8701645861869682, -0.8641042471440308, -0.8574680340693281,
    -0.8511763063214332, -0.8460938937028818, -0.8429889905377321,
    -0.8424957343831179, -0.8450818928622197, -0.8510228978936673,
    -0.8603832375643384, -0.8730059502117926, -0.8885106724196646,
    -0.9063003830260041, -0.9255766699443302, -0.9453630368496662,
    -0.9645354736468839, -0.9818592485897913, -0.9960306504730824,
    -1.0057222246968105, -1.009629913836321, -1.0065204364482692,
    -0.9952772200175418, -0.9749432459164152, -0.9447592645998528,
    -0.9041959945192649, -0.8529791229709709, -0.7911061741164214,
    -0.7188545900252078, -0.6367806749110542, -0.5457093700191524,
    -0.44671514568218473, -0.34109460662153673, -0.23033169569445022,
    -0.11605663975811277, -1.0926077778686108e-14
  ] 
}""",
        ),
        models.ECGDiagram(
            patient_id=2,
            ecg_date="03/05/2024",
            data_values="""{
  "data": [
    0.0, 0.11605663975810115, 0.23033169569445044, 0.3410946066215178,
    0.44671514568217713, 0.5457093700191451, 0.6367806749110477,
    0.7188545900252064, 0.7911061741164113, 0.8529791229709676,
    0.9041959945192631, 0.9447592645998532, 0.9749432459164116,
    0.9952772200175415, 1.006520436448272, 1.0096299138363232,
    1.0057222246968123, 0.9960306504730837, 0.981859248589796,
    0.9645354736468912, 0.9453630368496694, 0.925576669944333,
    0.9063003830260062, 0.8885106724196689, 0.8730059502117984,
    0.8603832375643382, 0.8510228978936687, 0.84508189286222,
    0.8424957343831195, 0.8429889905377347, 0.846093893702881,
    0.8511763063214335, 0.8574680340693289, 0.8641042471440314,
    0.870164586186968, 0.8747163965196099, 0.8768584576527609,
    0.8757635571547476, 0.8707182995733613, 0.8611586407162319,
    0.8466997916556837, 0.8271593398475876, 0.8025726795042107,
    0.7732001211151955, 0.7395253508667865, 0.7022452239387822,
    0.6622511900878201, 0.6206029543324855, 0.5784952590692015,
    0.5372189264338072, 0.4981175121455613, 0.4625410868103954,
    0.43179877179090986, 0.407111710245372, 0.38956814781511295,
    0.3800822318333586, 0.37935801508470385, 0.38785997434196845,
    0.4057911313066288, 0.4330796020047081, 0.4693741093528886,
    0.5140486827810706, 0.5662164494454501, 0.6247521049658555,
    0.6883223489561181, 0.7554232925815029, 0.8244236018001011,
    0.8936119394365837, 0.9612471188864509, 1.02560928737371,
    1.0850504206397429, 1.1380424350010887, 1.1832213060277958,
    1.2194257227157748, 1.2457289970187597, 1.2614631842148154,
    1.2662346414792132, 1.2599305506092044, 1.242716245545754,
    1.2150235050455624, 1.177530284284532, 1.1311326552602374,
    1.0769099941651572, 1.0160846849739285, 0.9499777942010769,
    0.879962305627879, 0.8074155810986775, 0.7336727315867954,
    0.6599825410690081, 0.587467485887133, 0.5170892378424042,
    0.44962083582529677, 0.3856264656297767, 0.3254495095136348,
    0.2692092259880557, 0.21680610700387387, 0.16793564533254485,
    0.12210994073221595, 0.07868629029193236, 0.03690165625650311,
    -0.004088307363790804, -0.04516715244559828, -0.08721405256140743,
    -0.1310603842337989, -0.17744811496277957, -0.22699157424978128,
    -0.2801440619142568, -0.33717057359197977, -0.3981277026329619,
    -0.46285151854576817, -0.5309539338984547, -0.6018277644609991,
    -0.6746603723135134, -0.7484554698895696, -0.8220623656040541,
    -0.8942116594513807, -0.9635561594892671, -1.0287155959505558,
    -1.0883235658216883, -1.1410750522804087, -1.185772833618882,
    -1.221371126331355, -1.2470148959342588, -1.262073413738391,
    -1.2661668331540166, -1.2591847983246904, -1.2412963725390374,
    -1.2129508742850632, -1.1748695243933664, -1.1280281273255552,
    -1.0736313220153941, -1.013079231727728, -0.9479276077721136,
    -0.8798427892139096, -0.8105529819287814, -0.7417974890402325,
    -0.6752755964125823, -0.6125968289107038, -0.5552342451570846,
    -0.5044823322130594, -0.46142090074405884, -0.42688617148662134,
    -0.4014499926336982, -0.38540784397486505, -0.3787759772991348,
    -0.3812977245139787, -0.39245868638882186, -0.41151020704040553,
    -0.43750025310002977, -0.46931056202620247, -0.5056987102089623,
    -0.5453435858660286, -0.5868926400555912, -0.6290092353081581,
    -0.6704184172379201, -0.709949499741479, -0.7465739766298736,
    -0.7794374473479431, -0.8078844655288339, -0.8314754785858613,
    -0.8499953150757685, -0.8634529838654192, -0.8720728642250577,
    -0.8762776776113159, -0.8766639289758833, -0.8739707773484621,
    -0.8690435325021009, -0.8627931682663149, -0.8561533866039436,
    -0.8500368547965148, -0.8452922678465223, -0.842663858443041,
    -0.8427548886099473, -0.8459965136070959, -0.8526232148991844,
    -0.862655761949138, -0.8758923906818431, -0.891908589392873,
    -0.9100655712385014, -0.9295271973536796, -0.9492848073483796,
    -0.9681891254023114, -0.9849881507252707, -0.9983697200580751,
    -1.0070072550824536, -1.0096070853716996, -1.0049556722679118,
    -0.9919650532150961, -0.9697148799011612, -0.937489535238627,
    -0.8948089798612562, -0.8414521926324572, -0.7774723241390928,
    -0.703202968322903, -0.6192552651939119, -0.5265058661167084,
    -0.42607611121567934, -0.319303074775374, -0.20770341829312977,
    -0.09293124204336596, 0.023268664244041254, 0.1391106101207641,
    0.2528191647974256, 0.3626799734046938, 0.46708852541949086,
    0.5645952431697412, 0.6539453870240035, 0.7341124550749291,
    0.8043239824305701, 0.8640789105989559, 0.9131559915082792,
    0.9516130030558229, 0.9797768726881945, 0.9982251210969052,
    1.0077593385283141, 1.009371680860083, 1.0042056118110774,
    0.9935123130125934, 0.9786043283204936, 0.960808097636438,
    0.9414170655593866, 0.9216470204221626, 0.9025952308218715,
    0.8852048028493384, 0.8702354870500592, 0.8582419266788629,
    0.8495600665471488, 0.8443021444419924, 0.8423603753418337,
    0.8434191235933556, 0.8469750510892304, 0.8523644412504805,
    0.8587966395465831, 0.8653923306159199, 0.8712251976430447,
    0.8753653877223054, 0.8769231418339714, 0.8750909420987759,
    0.8691825823720515, 0.8586676790870185, 0.843200303608886,
    0.8226406293607085, 0.7970687390735758, 0.7667900207120668,
    0.7323318848346941, 0.6944318505196488, 0.6540173603030149,
    0.6121779856564129, 0.5701309626195393, 0.5291812423581248,
    0.49067744486209214, 0.45596525843304603, 0.4263399274718591,
    0.402999512739893, 0.38700059016888066, 0.37921797699434456,
    0.3803099401467308, 0.390690156122711, 0.41050746048917797,
    0.4396341568697759, 0.4776633591790105, 0.5239155274426854,
    0.5774540378368221, 0.637109312879229, 0.7015107391357734,
    0.7691253279083725, 0.8383018387636443, 0.9073188947710534,
    0.9744354786989406, 1.0379421161047018, 1.096211027197098,
    1.1477435653953139, 1.1912133553865754, 1.2255036938356398,
    1.2497379764099892, 1.2633021583630863, 1.2658585339545367,
    1.257350422652537, 1.237997666665988, 1.2082831637073141,
    1.1689309697172465, 1.120876797621453, 1.0652319997647253,
    1.0032423442706437, 0.9362430713784036, 0.8656118386540215,
    0.7927212295808218, 0.7188925061583822, 0.6453522326459346,
    0.573193286456681, 0.503341607470986, 0.4365298246157229,
    0.37327864607246963, 0.31388661596506173, 0.25842853597124993,
    0.206762535875384, 0.15854546385075827, 0.11325596640534565,
    0.07022435017173222, 0.028668072972415616, -0.012268491430697116,
    -0.0534715245542209, -0.0958140796392897, -0.140112894194375,
    -0.18708733162922445, -0.23732200825310748, -0.2912345290771977,
    -0.3490495716475627, -0.41078032810668097, -0.4762180500002391,
    -0.5449301474821071, -0.6162669849671758, -0.6893771999804398,
    -0.7632310622033336, -0.8366510965828499, -0.9083489283197093,
    -0.9769670781056279, -1.0411242513566414, -1.0994625320230231,
    -1.150694814653738, -1.193650790567526, -1.227319845949404,
    -1.2508893300438708, -1.2637768068747341, -1.2656551086556842,
    -1.2564692560765423, -1.2364445912646655, -1.206085773540204,
    -1.1661666053728776, -1.1177109750068115, -1.0619655117801579,
    -1.0003648392907463, -0.9344905700296703, -0.8660254037844421,
    -0.7967038632708286, -0.728261318035289, -0.6623830075200028,
    -0.6006547741833476, -0.5445171577202627, -0.4952243838456204,
    -0.4538096099481898, -0.4210575712443938, -0.3974855125922404,
    -0.38333300200281456, -0.37856091232819067, -0.38285953854733157,
    -0.39566550078418183, -0.41618677887449984, -0.443434943685009,
    -0.4762634033691605, -0.5134102780110802, -0.5535443608522661,
    -0.5953125239443777, -0.6373868841064104, -0.6785100628917589,
    -0.7175369511744978, -0.7534715221323761, -0.7854974210279839,
    -0.8130012896375186, -0.835588049226789, -0.8530876591109338,
    -0.8655531775830431, -0.8732502672990365, -0.8766385968108452,
    -0.8763458828046153, -0.8731355832830187, -0.8678694809603267,
    -0.8614665803531116, -0.8548598748839, -0.8489526170369235,
    -0.8445757424805698, -0.8424480574637057, -0.843140699184797,
    -0.8470472247731009, -0.8543604814993186, -0.8650571660843049,
    -0.8788907032219121, -0.895392772577629, -0.9138835002970391,
    -0.9334900166304185, -0.9531727768747205, -0.9717587593220122,
    -0.9879804014192773, -1.0005189229240283, -1.0080505201016907,
    -1.009293803881459, -1.0030568013940464, -0.9882818464390936,
    -0.9640867500376615, -0.9298007650705759, -0.8849940348070439,
    -0.8294994377300119, -0.7634260026401645, -0.6871633593589165,
    -0.6013770011805627, -0.5069944545768753, -0.4051827682592326,
    -0.2973180363691099, -0.1849479486037729, -0.0697486036621792,
    0.046522977094573016, 0.1620790485226068, 0.275152370992561,
    0.3840467519372905, 0.4871852055411095, 0.5831541197753283,
    0.6707419596055862, 0.7489712261881458, 0.817122627480949,
    0.8747506875915695, 0.9216903207574514, 0.9580542105527, 0.9842211546237346,
    1.0008158486834389, 1.0086808795795463, 1.0088419655569933,
    1.0024677129051323, 0.9908253438938468, 0.9752339847446114,
    0.9570171796841647, 0.9374563152282828, 0.9177465971820054,
    0.8989571229823136, 0.8819964375765239, 0.867584757586947,
    0.8562338033587112, 0.8482349004008827, 0.8436557106526528,
    0.8423456406911483, 0.8439496596284943, 0.8479299552384802,
    0.8535945736565397, 0.8601319359066963, 0.8666499125115471,
    0.8722179730908383, 0.8759108170075268, 0.8768518377265393,
    0.8742547795134012, 0.8674620102049206, 0.8559779557126714,
    0.8394964163278664, 0.817920705568316, 0.7913758113804384,
    0.7602120677468968, 0.725000131876879, 0.6865173772178393,
    0.6457261242836623, 0.6037444286153087, 0.5618104174549682,
    0.5212414041865232, 0.4833892037693083, 0.4495932162973582,
    0.42113293426367365, 0.3991815588770156, 0.38476238072702373,
    0.3787094912063835, 0.3816342464483391, 0.3938987101782532,
    0.4155970626644755, 0.4465456883018881, 0.4862823539477402,
    0.5340745745491615, 0.5889369429934374, 0.6496568887625005,
    0.7148280359172218, 0.782890065566725, 0.8521737606740168,
    0.9209497298473771, 0.9874791780751054, 1.0500650207301327,
    1.1071016251335328, 1.1571215119486835, 1.198837454982925,
    1.2311785788423328, 1.2533192636290424, 1.2646999170732114,
    1.2650389582734927, 1.2543356635502159, 1.2328638429713017,
    1.2011566346578213, 1.1599830117685908, 1.1103168832420478,
    1.053299923851833, 0.990199482951143, 0.9223630869286136,
    0.8511711620752929, 0.7779896583861027, 0.7041242489626334,
    0.630777714438023, 0.5590119996080588, 0.48971625464587676,
    0.42358195218506567, 0.3610859121030411, 0.30248177730580933,
    0.24780017651851824, 0.19685749499637223, 0.1492728624313538,
    0.10449267025882135, 0.06182165865620223, 0.020459376467669117,
    -0.02045937646766858, -0.06182165865619982, -0.10449267025881873,
    -0.14927286243135088, -0.1968574949963672, -0.247800176518518,
    -0.3024817773058051, -0.36108591210303653, -0.4235819521850589,
    -0.48971625464586827, -0.5590119996080577, -0.6307777144380168,
    -0.7041242489626256, -0.7779896583860932, -0.8511711620752834,
    -0.9223630869286124, -0.9901994829511376, -1.0532999238518266,
    -1.1103168832420414, -1.1599830117685843, -1.2011566346578213,
    -1.232863842971299, -1.2543356635502143, -1.2650389582734953,
    -1.2646999170732147, -1.2533192636290444, -1.2311785788423366,
    -1.198837454982932, -1.1571215119486942, -1.1071016251335393,
    -1.050065020730141, -0.9874791780751131, -0.9209497298473872,
    -0.8521737606740314, -0.7828900655667331, -0.7148280359172297,
    -0.6496568887625094, -0.5889369429934448, -0.5340745745491721,
    -0.48628235394774944, -0.44654568830189234, -0.4155970626644796,
    -0.39389871017825584, -0.3816342464483401, -0.3787094912063833,
    -0.38476238072702323, -0.39918155887701373, -0.4211329342636709,
    -0.4495932162973523, -0.4833892037693068, -0.5212414041865188,
    -0.5618104174549633, -0.6037444286153038, -0.6457261242836543,
    -0.6865173772178372, -0.7250001318768744, -0.7602120677468924,
    -0.7913758113804344, -0.8179207055683111, -0.8394964163278648,
    -0.855977955712669, -0.8674620102049188, -0.8742547795134006,
    -0.8768518377265372, -0.8759108170075262, -0.8722179730908378,
    -0.8666499125115467, -0.8601319359066967, -0.8535945736565382,
    -0.8479299552384796, -0.8439496596284932, -0.842345640691148,
    -0.8436557106526492, -0.8482349004008817, -0.8562338033587074,
    -0.8675847575869439, -0.8819964375765216, -0.8989571229823065,
    -0.9177465971820027, -0.9374563152282805, -0.957017179684162,
    -0.975233984744606, -0.9908253438938431, -1.0024677129051278,
    -1.0088419655569916, -1.008680879579546, -1.0008158486834366,
    -0.9842211546237365, -0.9580542105527032, -0.921690320757453,
    -0.8747506875915716, -0.8171226274809523, -0.7489712261881569,
    -0.670741959605599, -0.5831541197753319, -0.4871852055411168,
    -0.38404675193730026, -0.27515237099257916, -0.16207904852262736,
    -0.046522977094582155, 0.06974860366217009, 0.18494794860376224,
    0.29731803636909193, 0.4051827682592194, 0.5069944545768682,
    0.6013770011805548, 0.6871633593589095, 0.7634260026401523,
    0.8294994377300096, 0.8849940348070421, 0.9298007650705736,
    0.9640867500376604, 0.988281846439091, 1.0030568013940504,
    1.009293803881461, 1.0080505201016934, 1.00051892292403, 0.9879804014192809,
    0.9717587593220193, 0.9531727768747249, 0.9334900166304225,
    0.9138835002970419, 0.8953927725776358, 0.8788907032219138,
    0.8650571660843082, 0.8543604814993202, 0.847047224773102,
    0.8431406991848004, 0.8424480574637067, 0.8445757424805708,
    0.8489526170369233, 0.8548598748839015, 0.861466580353112,
    0.8678694809603275, 0.8731355832830183, 0.8763458828046153,
    0.8766385968108473, 0.8732502672990387, 0.8655531775830441,
    0.8530876591109355, 0.8355880492267925, 0.8130012896375242,
    0.7854974210279904, 0.7534715221323779, 0.7175369511745022,
    0.678510062891764, 0.6373868841064187, 0.5953125239443825,
    0.5535443608522709, 0.5134102780110846, 0.47626340336916456,
    0.4434349436850146, 0.4161867788745025, 0.3956655007841824,
    0.3828595385473319, 0.3785609123281903, 0.38333300200281345,
    0.3974855125922364, 0.4210575712443917, 0.45380960994818487,
    0.4952243838456122, 0.544517157720254, 0.600654774183336,
    0.6623830075199939, 0.7282613180352803, 0.7967038632708228,
    0.8660254037844317, 0.9344905700296551, 1.0003648392907378,
    1.0619655117801468, 1.1177109750068066, 1.1661666053728708,
    1.2060857735401942, 1.236444591264661, 1.2564692560765374,
    1.2656551086556835, 1.2637768068747324, 1.2508893300438702,
    1.2273198459494057, 1.193650790567529, 1.1506948146537428,
    1.0994625320230274, 1.0411242513566437, 0.9769670781056319,
    0.9083489283197199, 0.8366510965828545, 0.7632310622033416,
    0.6893771999804428, 0.6162669849671802, 0.5449301474821177,
    0.47621805000024414, 0.41078032810668896, 0.34904957164756434,
    0.29123452907720354, 0.23732200825310773, 0.1870873316292283,
    0.1401128941943801, 0.0958140796392905, 0.053471524554225054,
    0.01226849143069729, -0.028668072972410426, -0.07022435017172758,
    -0.11325596640534297, -0.15854546385075705, -0.20676253587538312,
    -0.2584285359712419, -0.31388661596505385, -0.37327864607246497,
    -0.4365298246157193, -0.5033416074709819, -0.5731932864566686,
    -0.6453522326459218, -0.7188925061583844, -0.7927212295808155,
    -0.865611838654017, -0.9362430713783961, -1.0032423442706326,
    -1.0652319997647273, -1.1208767976214482, -1.1689309697172436,
    -1.2082831637073093, -1.2379976666659867, -1.2573504226525387,
    -1.2658585339545387, -1.263302158363089, -1.2497379764099903,
    -1.2255036938356505, -1.1912133553865791, -1.1477435653953258,
    -1.0962110271971048, -1.037942116104711, -0.9744354786989586,
    -0.9073188947710592, -0.8383018387636597, -0.7691253279083837,
    -0.7015107391357851, -0.637109312879235, -0.5774540378368295,
    -0.5239155274426867, -0.47766335917901737, -0.43963415686978213,
    -0.41050746048918185, -0.3906901561227133, -0.38030994014673114,
    -0.3792179769943449, -0.3870005901688791, -0.402999512739891,
    -0.4263399274718563, -0.4559652584330437, -0.4906774448620852,
    -0.529181242358117, -0.5701309626195344, -0.6121779856564079,
    -0.6540173603030114, -0.694431850519639, -0.7323318848346867,
    -0.766790020712067, -0.7970687390735722, -0.8226406293607048,
    -0.8432003036088844, -0.8586676790870154, -0.8691825823720511,
    -0.8750909420987736, -0.8769231418339699, -0.8753653877223055,
    -0.8712251976430444, -0.8653923306159206, -0.8587966395465819,
    -0.8523644412504798, -0.8469750510892302, -0.8434191235933541,
    -0.8423603753418322, -0.844302144441988, -0.8495600665471467,
    -0.8582419266788613, -0.8702354870500544, -0.8852048028493351,
    -0.9025952308218708, -0.9216470204221568, -0.9414170655593841,
    -0.9608080976364339, -0.9786043283204897, -0.9935123130125928,
    -1.004205611811074, -1.009371680860083, -1.0077593385283132,
    -0.9982251210969044, -0.9797768726881951, -0.9516130030558264,
    -0.9131559915082816, -0.8640789105989608, -0.8043239824305745,
    -0.7341124550749346, -0.6539453870240176, -0.5645952431697518,
    -0.46708852541950363, -0.3626799734047028, -0.25281916479743394,
    -0.13911061012077083, -0.023268664244059458, 0.09293124204335015,
    0.20770341829311917, 0.3193030747753621, 0.42607611121567257,
    0.5265058661166938, 0.6192552651939124, 0.7032029683228944,
    0.7774723241390891, 0.8414521926324537, 0.8948089798612493,
    0.9374895352386267, 0.9697148799011596, 0.9919650532150972,
    1.004955672267913, 1.009607085371703, 1.0070072550824547,
    0.9983697200580822, 0.9849881507252768, 0.9681891254023147,
    0.9492848073483869, 0.9295271973536814, 0.9100655712385025,
    0.8919085893928789, 0.8758923906818459, 0.8626557619491394,
    0.8526232148991879, 0.8459965136070973, 0.8427548886099498,
    0.842663858443042, 0.8452922678465211, 0.8500368547965167,
    0.8561533866039441, 0.8627931682663158, 0.8690435325021006,
    0.873970777348463, 0.8766639289758847, 0.8762776776113166,
    0.8720728642250604, 0.8634529838654211, 0.8499953150757718,
    0.8314754785858649, 0.8078844655288369, 0.7794374473479441,
    0.74657397662988, 0.7099494997414852, 0.670418417237926, 0.629009235308163,
    0.5868926400555936, 0.5453435858660366, 0.5056987102089688,
    0.46931056202620686, 0.43750025310003304, 0.41151020704040775,
    0.3924586863888242, 0.3812977245139796, 0.378775977299134,
    0.38540784397486316, 0.40144999263369496, 0.42688617148661356,
    0.4614209007440505, 0.5044823322130585, 0.555234245157077,
    0.612596828910696, 0.6752755964125761, 0.7417974890402292,
    0.8105529819287803, 0.8798427892138965, 0.9479276077721032,
    1.0130792317277202, 1.0736313220153897, 1.1280281273255537,
    1.174869524393356, 1.212950874285057, 1.2412963725390345,
    1.2591847983246884, 1.266166833154015, 1.262073413738389, 1.24701489593426,
    1.2213711263313585, 1.1857728336188849, 1.1410750522804098,
    1.0883235658216948, 1.0287155959505643, 0.9635561594892763,
    0.8942116594513839, 0.8220623656040575, 0.7484554698895725,
    0.6746603723135238, 0.6018277644610099, 0.5309539338984578,
    0.4628515185457719, 0.3981277026329654, 0.3371705735919885,
    0.2801440619142621, 0.22699157424978295, 0.17744811496278226,
    0.1310603842338025, 0.08721405256141325, 0.04516715244560166,
    0.004088307363792131, -0.03690165625650077, -0.07868629029192832,
    -0.12210994073221292, -0.1679356453325397, -0.21680610700387315,
    -0.26920922598805097, -0.3254495095136287, -0.38562646562977354,
    -0.4496208358252869, -0.5170892378424027, -0.5874674858871259,
    -0.6599825410690032, -0.7336727315867895, -0.8074155810986654,
    -0.8799623056278761, -0.9499777942010675, -1.0160846849739233,
    -1.076909994165152, -1.131132655260229, -1.1775302842845303,
    -1.2150235050455616, -1.2427162455457537, -1.259930550609204,
    -1.2662346414792156, -1.261463184214816, -1.2457289970187615,
    -1.2194257227157816, -1.183221306027802, -1.1380424350010938,
    -1.0850504206397495, -1.0256092873737135, -0.9612471188864646,
    -0.8936119394365942, -0.824423601800111, -0.7554232925815104,
    -0.6883223489561231, -0.6247521049658685, -0.5662164494454589,
    -0.514048682781078, -0.4693741093528939, -0.4330796020047109,
    -0.40579113130663413, -0.38785997434197084, -0.37935801508470535,
    -0.38008223183335854, -0.389568147815112, -0.40711171024536774,
    -0.43179877179090476, -0.4625410868103952, -0.4981175121455563,
    -0.5372189264338029, -0.5784952590691984, -0.6206029543324766,
    -0.6622511900878191, -0.7022452239387761, -0.7395253508667823,
    -0.7732001211151931, -0.8025726795042035, -0.8271593398475867,
    -0.8466997916556799, -0.86115864071623, -0.8707182995733599,
    -0.875763557154745, -0.8768584576527605, -0.8747163965196086,
    -0.8701645861869682, -0.8641042471440308, -0.8574680340693281,
    -0.8511763063214332, -0.8460938937028818, -0.8429889905377321,
    -0.8424957343831179, -0.8450818928622197, -0.8510228978936673,
    -0.8603832375643384, -0.8730059502117926, -0.8885106724196646,
    -0.9063003830260041, -0.9255766699443302, -0.9453630368496662,
    -0.9645354736468839, -0.9818592485897913, -0.9960306504730824,
    -1.0057222246968105, -1.009629913836321, -1.0065204364482692,
    -0.9952772200175418, -0.9749432459164152, -0.9447592645998528,
    -0.9041959945192649, -0.8529791229709709, -0.7911061741164214,
    -0.7188545900252078, -0.6367806749110542, -0.5457093700191524,
    -0.44671514568218473, -0.34109460662153673, -0.23033169569445022,
    -0.11605663975811277, -1.0926077778686108e-14
  ] 
}""",
        ),
    ]
    # session.add_all(users)
    # session.add_all(doctors)
    # session.add_all(patients)
    # session.add_all(diargam)
    # session.commit()


session = next(db())

insert_users(session, 10)


def auth_middleware(
    authorization: Optional[str] = Header(None), db: Session = Depends(db)
):
    if authorization is None:
        raise HTTPException(status_code=401, detail="Unauthorized")
    if not authorization.startswith("JWT"):
        raise HTTPException(status_code=401, detail="Unauthorized")
    auth = authorization.split(" ")[1]
    if auth != "null":
        return get_user_by_token(db, auth)
    else:
        return None


@app.post("/api/me")
async def me(
    user: Optional[dict] = Depends(auth_middleware), db: Session = Depends(db)
):
    success = False
    if user:
        success = True
        user_in_doctor_table = (
            db.query(models.Doctor).filter(models.Doctor.user_id == user.id).first()
        )
        user_in_patient_table = (
            db.query(models.Patient).filter(models.Patient.user_id == user.id).first()
        )
        res = dict(
            (column.name, getattr(user, column.name))
            for column in user.__table__.columns
        )
        if user_in_patient_table is not None:
            res["patient"] = dict(
                (column.name, getattr(user_in_patient_table, column.name))
                for column in user_in_patient_table.__table__.columns
            )
        if user_in_doctor_table is not None:
            res["doctor"] = dict(
                (column.name, getattr(user_in_doctor_table, column.name))
                for column in user_in_doctor_table.__table__.columns
            )
        return {
            "success": success,
            "user": res,
        }
    else:
        return {"success": success, "message": "User not found"}


@app.get("/api/my-patients")
async def get_my_patients(
    user: Optional[dict] = Depends(auth_middleware), db: Session = Depends(db)
):
    success = False
    doctor = db.query(models.Doctor).filter(models.Doctor.user_id == user.id).first()
    if doctor:
        patients = (
            db.query(models.Patient).filter(models.Patient.doctor_id == doctor.id).all()
        )
        ls = []
        for pat in patients:
            user_patient = (
                db.query(models.User).filter(models.User.id == pat.user_id).first()
            )
            res = dict(
                (column.name, getattr(user_patient, column.name))
                for column in user_patient.__table__.columns
            )
            res["patient"] = dict(
                (column.name, getattr(pat, column.name))
                for column in pat.__table__.columns
            )
            ls.append(res)
        success = True
        return {"success": success, "patients": ls}
    else:
        return {"success": success, "message": "Error occurred!"}


@app.get("/api/refresh-token")
async def refresh_token():
    pass


@app.get("/api/verify-token")
async def verify_token(payload: str):
    pass


@app.post("/api/login")
async def login(login_data: UserLogin, db: Session = Depends(db)) -> dict:
    password = login_data.password
    emailOrPhone = login_data.emailOrPhone
    success = False
    if re.match(r"^(\+?\d{1,2}\s?)?\(?\d{3}\)?[\s.-]?\d{3}[\s.-]?\d{4}$", emailOrPhone):
        user = db.query(models.User).filter(models.User.phone == emailOrPhone).first()
        if user:
            if user.check_password(password):
                success = True
                token = get_token(user)
                return {
                    "message": f"Login with email: {emailOrPhone}",
                    "success": success,
                    "token": token,
                }
            else:
                return {
                    "message": f"Failed login credentials",
                    "success": success,
                }
    elif re.match(r"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$", emailOrPhone):
        user = db.query(models.User).filter(models.User.email == emailOrPhone).first()
        if user:
            if user.check_password(password):
                success = True
                token = get_token(user)
                return {
                    "message": f"Login with email: {emailOrPhone}",
                    "success": success,
                    "token": token,
                }
            else:
                return {
                    "message": f"Failed login credentials",
                    "success": success,
                }
        return {
            "message": f"Failed login credentials",
            "success": success,
        }
    else:
        return {"message": "Invalid phone number or email", "success": success}


@app.post("/api/register")
async def register(
    data_user: UserRegister,
    # background_tasks: BackgroundTasks,
    doctor: Optional[dict] = Depends(auth_middleware),
    db: Session = Depends(db),
):
    email = data_user.email
    phone = data_user.phone
    first_name = data_user.first_name
    last_name = data_user.last_name
    sur_name = data_user.sur_name
    date_of_birth = data_user.date_of_birth
    gender = data_user.gender
    address = data_user.address
    password = generate_password(phone)
    hashed_password = generate_password_hash(password)
    new_user = models.User(
        email=email,
        first_name=first_name,
        last_name=last_name,
        sur_name=sur_name,
        date_of_birth=date_of_birth,
        gender=gender,
        address=address,
        password=hashed_password,
        is_admin=False,
        is_archived=False,
    )

    db.add(new_user)
    db.commit()
    new_patient = models.Patient(user_id=new_user.id, doctor_id=doctor.id)
    db.add(new_patient)
    db.commit()
    # background_tasks.add_task(
    send_message(create_message_account_create(email, password, phone)), email
    # )


@app.post("/api/get-verify-code")
async def get_verify_code(
    data: CodeGenerate,
    # background_tasks: BackgroundTasks,
    doctor: Optional[dict] = Depends(auth_middleware),
    db: Session = Depends(db),
):
    success = False
    if doctor is None:
        return {"success": success, "message": "Anonymous user"}
    user = db.query(models.User).filter(models.User.email == data.email).first()
    if user:
        return {"success": success, "message": "User already exists"}
    email = data.email
    first_name = data.first_name
    last_name = data.last_name
    verification_code = "".join(str(random.randint(0, 9)) for _ in range(6))
    verify_email = models.VerifyEmail(
        email=email,
        verification_code=verification_code,
        time_data=str(datetime.now()),
        is_verify=False,
    )
    db.add(verify_email)
    db.commit()
    # background_tasks.add_task(
    send_message(
        create_message_account_verify_mail(
            email, first_name, last_name, verification_code
        )
    ),
    # )
    success = True
    return {"success": success}


@app.post("/api/check-verify-code")
async def check_verify_code(
    codeData: CodeVerify, background_tasks: BackgroundTasks, db: Session = Depends(db)
):
    code = codeData.code
    email = codeData.email
    verify_mail = (
        db.query(models.VerifyEmail).filter(models.VerifyEmail.email == email).first()
    )
    if verify_mail:
        if verify_mail.verification_code == str(code):
            verify_mail.is_verify = True
            return {"success": True}
        return {"success": False}
    return {"success": False}
    # background_tasks.add_task(
    #     send_message(create_message_account_create(email, password, phone)), email
    # )


@app.post("/api/change-password")
async def change_password(
    passwordData: UserPasswordChange,
    user: Optional[dict] = Depends(auth_middleware),
    db: Session = Depends(db),
):
    db_user = db.query(models.User).filter(models.User.id == user.id).first()
    if db_user is None:
        raise HTTPException(status_code=404, detail="User not found")
    if user.check_password(passwordData.old_password):
        if passwordData.new_password1 == passwordData.new_password2:
            setattr(db_user, "password", passwordData.new_password1)
            db.commit()
            return {"success": True}
        return {"success": False, "message": "New passwords do not match"}
    return {"success": False, "message": "Wrong password"}


@app.post("/api/update-account")
async def update_account(
    new_user_data: UserUpdate,
    user: Optional[dict] = Depends(auth_middleware),
    db: Session = Depends(db),
):
    db_user = db.query(models.User).filter(models.User.id == user.id).first()
    if db_user is None:
        raise HTTPException(status_code=404, detail="User not found")
    for field, value in new_user_data.dict(exclude_unset=True).items():
        setattr(db_user, field, value)
    db.commit()

    return {"success": True, "message": "Account updated successfully"}


@app.get("/users")
async def get_users(db: Session = Depends(db)):
    users = db.query(models.User).all()
    ls = []
    for user in users:
        res = dict(
            (column.name, getattr(user, column.name))
            for column in user.__table__.columns
        )
        user_in_doctor_table = (
            db.query(models.Doctor).filter(models.Doctor.user_id == user.id).first()
        )
        user_in_patient_table = (
            db.query(models.Patient).filter(models.Patient.user_id == user.id).first()
        )
        if user_in_patient_table is not None:
            res["patient"] = dict(
                (column.name, getattr(user_in_patient_table, column.name))
                for column in user_in_patient_table.__table__.columns
            )
        if user_in_doctor_table is not None:
            res["doctor"] = dict(
                (column.name, getattr(user_in_doctor_table, column.name))
                for column in user_in_doctor_table.__table__.columns
            )
        ls.append(res)
    return ls


@app.get("/doctors")
async def get_users(db: Session = Depends(db)):
    users = db.query(models.Doctor).all()
    return users


@app.get("/api/user-ecg-diagrams")
async def get_users_diagrams(user_id: int, db: Session = Depends(db)):
    user = db.query(models.User).filter(models.User.id == user_id).first()
    patient = db.query(models.Patient).filter(models.Patient.user_id == user_id).first()
    ecg_diagrams = (
        db.query(models.ECGDiagram)
        .filter(models.ECGDiagram.patient_id == patient.id)
        .all()
    )
    res = dict(
        (column.name, getattr(user, column.name)) for column in user.__table__.columns
    )
    if patient is not None:
        res["patient"] = dict(
            (column.name, getattr(patient, column.name))
            for column in patient.__table__.columns
        )
    return {"ecg_diagrams": ecg_diagrams, "patient": res}


@app.get("/api/additional-data")
async def get_users(
    user: Optional[dict] = Depends(auth_middleware), db: Session = Depends(db)
):
    res = {}
    user_in_doctor_table = (
        db.query(models.Doctor).filter(models.Doctor.user_id == user.id).first()
    )
    user_in_patient_table = (
        db.query(models.Patient).filter(models.Patient.user_id == user.id).first()
    )
    if user_in_patient_table is not None:
        my_doctor = (
            db.query(models.Doctor)
            .filter(models.Doctor.id == user_in_patient_table.doctor_id)
            .first()
        )
        doctor = (
            db.query(models.User).filter(models.User.id == my_doctor.user_id).first()
        )
        res["my_doctor"] = dict(
            (column.name, getattr(doctor, column.name))
            for column in doctor.__table__.columns
        )
    if user_in_doctor_table is not None:
        res["patients"] = (
            db.query(models.Patient)
            .filter(models.Patient.doctor_id == user_in_doctor_table.id)
            .count()
        )
    return res
